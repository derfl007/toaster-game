[gd_scene load_steps=18 format=3 uid="uid://cikpqmj2li8c5"]

[ext_resource type="SpriteFrames" uid="uid://d2in5xrslifl8" path="res://sprites/toaster.aseprite" id="1_312p5"]
[ext_resource type="Script" path="res://scripts/Toaster.cs" id="1_x7gep"]
[ext_resource type="Texture2D" uid="uid://cdm1n4luw3wm7" path="res://sprites/border_black.aseprite" id="3_ms0xp"]
[ext_resource type="Texture2D" uid="uid://dn161dxnemn2h" path="res://sprites/toast.png" id="4_x3e47"]
[ext_resource type="Texture2D" uid="uid://t1ymuqpslc5p" path="res://sprites/input_tilemap.png" id="5_ck480"]
[ext_resource type="PackedScene" uid="uid://dher2iwiydmp8" path="res://scenes/blueprints/input_prompt.tscn" id="5_xhesm"]
[ext_resource type="Texture2D" uid="uid://cr36bnl57ydlk" path="res://gui/input_interact_kbm.tres" id="6_lnads"]
[ext_resource type="Texture2D" uid="uid://c0t8k6l3tplxx" path="res://gui/input_interact_xbox.tres" id="7_hri0c"]
[ext_resource type="Texture2D" uid="uid://by35dbnn2f7wk" path="res://gui/input_interact_ps.tres" id="8_qkf0c"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ueuxy"]
size = Vector2(30, 6)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rice8"]
size = Vector2(32, 56)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hxj34"]
size = Vector2(72, 56)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o1bvp"]
size = Vector2(48, 56)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ecjg7"]
size = Vector2(72, 56)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qrxey"]
size = Vector2(32, 56)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jp3im"]
size = Vector2(16, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_1yue5"]
atlas = ExtResource("5_ck480")
region = Rect2(391, 357, 16, 16)

[node name="Toaster" type="Node2D"]
z_index = 3
script = ExtResource("1_x7gep")

[node name="StaticBody2D" type="StaticBody2D" parent="."]
collision_layer = 2

[node name="DefaultCollisionShape" type="CollisionPolygon2D" parent="StaticBody2D"]
position = Vector2(16, -14)
scale = Vector2(1.6, 1.4)
polygon = PackedVector2Array(-10, 10, -10, -7.85714, -9.375, -7.85714, -8.75, 6.42857, 5.625, 6.42857, 8.125, -7.85714, 10, -7.85714, 10, 10)

[node name="BackgroundSprite" type="Sprite2D" parent="StaticBody2D/DefaultCollisionShape"]
z_index = -1
position = Vector2(0, -1.42857)
scale = Vector2(0.625, 0.714286)

[node name="MainSprite" type="AnimatedSprite2D" parent="StaticBody2D/DefaultCollisionShape"]
z_index = 3
position = Vector2(0, -1.42857)
scale = Vector2(0.625, 0.714286)
sprite_frames = ExtResource("1_312p5")
speed_scale = 0.0

[node name="BlockerCollisionShape" type="CollisionPolygon2D" parent="StaticBody2D"]
position = Vector2(10, -33)
polygon = PackedVector2Array(-10, 8, -10, 6, 22, 6, 22, 8)
one_way_collision = true

[node name="DetectionArea" type="Area2D" parent="."]
position = Vector2(1, -5)
collision_layer = 8

[node name="DetectionCollisionShape" type="CollisionShape2D" parent="DetectionArea"]
z_index = 1
position = Vector2(15, -3)
shape = SubResource("RectangleShape2D_ueuxy")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="TimingUi" type="Control" parent="CanvasLayer"]
unique_name_in_owner = true
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="NinePatchRect" type="NinePatchRect" parent="CanvasLayer/TimingUi"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -264.0
offset_top = -88.0
offset_right = 264.0
offset_bottom = -40.0
grow_horizontal = 2
grow_vertical = 0
texture = ExtResource("3_ms0xp")
patch_margin_left = 4
patch_margin_top = 4
patch_margin_right = 4
patch_margin_bottom = 4

[node name="LeftEdgeArea" type="Area2D" parent="CanvasLayer/TimingUi/NinePatchRect"]
unique_name_in_owner = true
position = Vector2(16, 24)
collision_layer = 32
collision_mask = 16
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/TimingUi/NinePatchRect/LeftEdgeArea"]
shape = SubResource("RectangleShape2D_rice8")

[node name="GoodTimingAreaLeft" type="Area2D" parent="CanvasLayer/TimingUi/NinePatchRect"]
unique_name_in_owner = true
position = Vector2(200, 24)
collision_layer = 32
collision_mask = 16
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/TimingUi/NinePatchRect/GoodTimingAreaLeft"]
position = Vector2(4, 0)
shape = SubResource("RectangleShape2D_hxj34")

[node name="Polygon2D" type="Polygon2D" parent="CanvasLayer/TimingUi/NinePatchRect/GoodTimingAreaLeft"]
z_index = 1
position = Vector2(-3.20001, 0)
scale = Vector2(1.8, 1)
color = Color(1, 0.678431, 0.164706, 0.607843)
polygon = PackedVector2Array(-16, -24, -16, 24, 24, 24, 24, -24)

[node name="PerfectTimingArea" type="Area2D" parent="CanvasLayer/TimingUi/NinePatchRect"]
unique_name_in_owner = true
position = Vector2(264, 24)
collision_layer = 32
collision_mask = 16
metadata/_edit_group_ = true

[node name="CollisionShape2D2" type="CollisionShape2D" parent="CanvasLayer/TimingUi/NinePatchRect/PerfectTimingArea"]
shape = SubResource("RectangleShape2D_o1bvp")

[node name="Polygon2D" type="Polygon2D" parent="CanvasLayer/TimingUi/NinePatchRect/PerfectTimingArea"]
z_index = 1
position = Vector2(-4.80001, 0)
scale = Vector2(1.2, 1)
color = Color(0.356863, 0.890196, 0, 0.607843)
polygon = PackedVector2Array(-16, -24, -16, 24, 24, 24, 24, -24)

[node name="GoodTimingAreaRight" type="Area2D" parent="CanvasLayer/TimingUi/NinePatchRect"]
unique_name_in_owner = true
position = Vector2(320, 24)
collision_layer = 32
collision_mask = 16
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/TimingUi/NinePatchRect/GoodTimingAreaRight"]
position = Vector2(4, 0)
shape = SubResource("RectangleShape2D_ecjg7")

[node name="Polygon2D" type="Polygon2D" parent="CanvasLayer/TimingUi/NinePatchRect/GoodTimingAreaRight"]
z_index = 1
position = Vector2(-3.20001, 0)
scale = Vector2(1.8, 1)
color = Color(1, 0.678431, 0.164706, 0.607843)
polygon = PackedVector2Array(-16, -24, -16, 24, 24, 24, 24, -24)

[node name="RightEdgeArea" type="Area2D" parent="CanvasLayer/TimingUi/NinePatchRect"]
unique_name_in_owner = true
position = Vector2(512, 24)
collision_layer = 32
collision_mask = 16
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/TimingUi/NinePatchRect/RightEdgeArea"]
shape = SubResource("RectangleShape2D_qrxey")

[node name="TimingBar" type="CharacterBody2D" parent="CanvasLayer/TimingUi/NinePatchRect"]
unique_name_in_owner = true
position = Vector2(16, 24)
collision_layer = 16
collision_mask = 32

[node name="CollisionShape2D" type="CollisionShape2D" parent="CanvasLayer/TimingUi/NinePatchRect/TimingBar"]
shape = SubResource("RectangleShape2D_jp3im")

[node name="Sprite2D" type="Sprite2D" parent="CanvasLayer/TimingUi/NinePatchRect/TimingBar"]
position = Vector2(7.86781e-06, -1.96695e-05)
scale = Vector2(0.145454, 0.139131)
texture = ExtResource("4_x3e47")
region_enabled = true
region_rect = Rect2(50, 40, 220, 230)

[node name="TimingBarSpawnPoint" type="Marker2D" parent="CanvasLayer/TimingUi/NinePatchRect"]
unique_name_in_owner = true
position = Vector2(48, 24)

[node name="InputPrompt" parent="CanvasLayer/TimingUi" instance=ExtResource("5_xhesm")]
layout_mode = 1
offset_left = 552.0
offset_top = 488.0
offset_right = 552.0
offset_bottom = 488.0
_kbmTexture = ExtResource("6_lnads")
_xboxTexture = ExtResource("7_hri0c")
_psTexture = ExtResource("8_qkf0c")

[node name="TouchScreenButton" type="TouchScreenButton" parent="CanvasLayer/TimingUi"]
visible = false
position = Vector2(552, 488)
scale = Vector2(3, 3)
texture_normal = SubResource("AtlasTexture_1yue5")
action = "interact"
visibility_mode = 1

[connection signal="body_entered" from="DetectionArea" to="." method="OnToasterBodyEntered"]
